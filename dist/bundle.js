var e={738:(e,n,t)=>{const r=t(647),o=t(520),s=t(66),a=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/gm;function i(e){console.log(`[dotenv][DEBUG] ${e}`)}const d={config:function(e){let n=o.resolve(process.cwd(),".env"),t="utf8";const a=Boolean(e&&e.debug),c=Boolean(e&&e.override);var u;e&&(null!=e.path&&(n="~"===(u=e.path)[0]?o.join(s.homedir(),u.slice(1)):u),null!=e.encoding&&(t=e.encoding));try{const e=d.parse(r.readFileSync(n,{encoding:t}));return Object.keys(e).forEach((function(n){Object.prototype.hasOwnProperty.call(process.env,n)?(!0===c&&(process.env[n]=e[n]),a&&i(!0===c?`"${n}" is already defined in \`process.env\` and WAS overwritten`:`"${n}" is already defined in \`process.env\` and was NOT overwritten`)):process.env[n]=e[n]})),{parsed:e}}catch(e){return a&&i(`Failed to load ${n} ${e.message}`),{error:e}}},parse:function(e){const n={};let t,r=e.toString();for(r=r.replace(/\r\n?/gm,"\n");null!=(t=a.exec(r));){const e=t[1];let r=t[2]||"";r=r.trim();const o=r[0];r=r.replace(/^(['"`])([\s\S]*)\1$/gm,"$2"),'"'===o&&(r=r.replace(/\\n/g,"\n"),r=r.replace(/\\r/g,"\r")),n[e]=r}return n}};e.exports.config=d.config,e.exports.parse=d.parse,e.exports=d},587:e=>{function n(e,n){return Object.prototype.hasOwnProperty.call(e,n)}e.exports=function(e,t,r,o){t=t||"&",r=r||"=";var s={};if("string"!=typeof e||0===e.length)return s;var a=/\+/g;e=e.split(t);var i=1e3;o&&"number"==typeof o.maxKeys&&(i=o.maxKeys);var d=e.length;i>0&&d>i&&(d=i);for(var c=0;c<d;++c){var u,p,l,f,h=e[c].replace(a,"%20"),g=h.indexOf(r);g>=0?(u=h.substr(0,g),p=h.substr(g+1)):(u=h,p=""),l=decodeURIComponent(u),f=decodeURIComponent(p),n(s,l)?Array.isArray(s[l])?s[l].push(f):s[l]=[s[l],f]:s[l]=f}return s}},361:e=>{var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,o){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map((function(o){var s=encodeURIComponent(n(o))+r;return Array.isArray(e[o])?e[o].map((function(e){return s+encodeURIComponent(n(e))})).join(t):s+encodeURIComponent(n(e[o]))})).filter(Boolean).join(t):o?encodeURIComponent(n(o))+r+encodeURIComponent(n(e)):""}},673:(e,n,t)=>{n.parse=t(587),t(361)},647:()=>{},66:()=>{},520:()=>{},399:()=>{},3:()=>{}},n={};function t(r){var o=n[r];if(void 0!==o)return o.exports;var s=n[r]={exports:{}};return e[r](s,s.exports,t),s.exports}(()=>{var e,n=t(3),r=t(738),o=t(399),s=new Uint8Array(16);function a(){if(!e&&!(e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(s)}const i=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,d=function(e){return"string"==typeof e&&i.test(e)};for(var c=[],u=0;u<256;++u)c.push((u+256).toString(16).substr(1));const p=function(e,n,t){var r=(e=e||{}).random||(e.rng||a)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,n){t=t||0;for(var o=0;o<16;++o)n[t+o]=r[o];return n}return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=(c[e[n+0]]+c[e[n+1]]+c[e[n+2]]+c[e[n+3]]+"-"+c[e[n+4]]+c[e[n+5]]+"-"+c[e[n+6]]+c[e[n+7]]+"-"+c[e[n+8]]+c[e[n+9]]+"-"+c[e[n+10]]+c[e[n+11]]+c[e[n+12]]+c[e[n+13]]+c[e[n+14]]+c[e[n+15]]).toLowerCase();if(!d(t))throw TypeError("Stringified UUID is invalid");return t}(r)},l=[];class f{constructor(e="",n=0,t=[]){this.id=p(),this.username=e,this.age=n,this.hobbies=t}}var h=t(673);const g=r.config().parsed.PORT||3e3;n.createServer(((e,n)=>{if(e.url.includes("api/users"))switch(e.method){case"GET":!function(e,n){const t=(0,o.parse)(e.url,!0),r=t.pathname.slice(11);if(null==t.search&&t.pathname.length<=11)n.statusCode=200,l.forEach((e=>n.write(`{\n      id: ${e.id},\n      username: ${e.username},\n      age: ${e.age},\n      hobbies: ${e.hobbies}\n    }\n`))),n.end();else if(r.match(/^[0-9A-F]{8}-[0-9A-F]{4}-[4][0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i)){let e=!1;l.forEach((t=>{r===t.id&&(n.statusCode=200,n.write(`{\n            id: ${t.id},\n            username: ${t.username},\n            age: ${t.age},\n            hobbies: ${t.hobbies}\n          }\n`),e=!e)})),e||(n.statusCode=404,n.write(`Record with id ${r} doesn't exist`)),n.end()}else n.statusCode=400,n.write(`Id ${r} is invalid`),n.end()}(e,n);break;case"POST":!function(e,n){let t="";e.on("data",(n=>{t+=n,t.length>1e6&&e.connection.destroy()})).on("end",(()=>{const e=(0,h.parse)(t);[e.username,e.age,e.hobbies].length<=1?(n.statusCode=400,n.end("Request doesn't contain required fields")):(function(e,n,t){const r=new f(e,n,t);l.push(r)}(e.username,e.age,e.hobbies.split(" ")),n.statusCode=201,n.end("New user created"))}))}(e,n);break;case"PUT":!function(e,n){const t=(0,o.parse)(e.url,!0).pathname.slice(11);let r="";e.on("data",(n=>{r+=n,r.length>1e6&&e.connection.destroy()})).on("end",(()=>{const e=(0,h.parse)(r);if(t.match(/^[0-9A-F]{8}-[0-9A-F]{4}-[4][0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i)){let r=!1;l.forEach((o=>{t===o.id&&(e.username&&(o.username=e.username),e.age&&(o.age=e.age),e.hobbies&&(o.hobbies=e.hobbies.split(" ")),r=!r,n.statusCode=200,n.end(`Found id ${t} and updated`))})),r||(n.statusCode=404,n.end(`Record with id ${t} doesn't exist`))}else n.statusCode=400,n.write(`Id ${t} is invalid`),n.end()}))}(e,n);break;case"DELETE":!function(e,n){const t=(0,o.parse)(e.url,!0).pathname.slice(11);if(t.match(/^[0-9A-F]{8}-[0-9A-F]{4}-[4][0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i)){let e=!1;l.forEach(((r,o)=>{t===r.id&&(l.splice(o,1),e=!e,n.statusCode=204,n.end(`Found id ${t} and deleted`))})),e||(n.statusCode=404,n.end(`Record with id ${t} doesn't exist`))}else n.statusCode=400,n.write(`Id ${t} is invalid`),n.end()}(e,n)}else n.statusCode=404,n.end("This path doesn't exist")})).listen(g,console.log(`Server running on port ${g}`))})();